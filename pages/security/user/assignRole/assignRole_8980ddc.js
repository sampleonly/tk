define("pages/security/user/assignRole/assignRole",function(e,r,n){"use strict";var i=e("api"),s=e("msg");n.exports={template:'\r\n<div>\r\n    <!-- mainview -->\r\n    <mainview title="分配角色">\r\n        <breadcrumb slot="breadcrumb">\r\n            <breadcrumb-item link="/" class="am-icon-home">首页</breadcrumb-item>\r\n            <breadcrumb-item>系统安全</breadcrumb-item>\r\n            <breadcrumb-item link="/security/user">用户管理</breadcrumb-item>\r\n            <breadcrumb-item>分配角色</breadcrumb-item>\r\n        </breadcrumb>\r\n\r\n        <!-- mainview-body -->\r\n        <template>\r\n            <am-panel title="角色列表">\r\n                <div class="am-g">\r\n                    <div class="am-u-md-10 am-u-md-offset-1">\r\n\r\n                        <div class="am-u-md-2 am-margin-bottom-xs" v-for="role in roles">\r\n                            <label>\r\n                                <input type="checkbox" value="role.id" :checked="role.assigned" @click="toggle(role.id)"> {{role.roleName}}\r\n                            </label>\r\n                        </div>\r\n\r\n                        <div class="am-u-md-12 am-margin-top">\r\n                            <form-submit @submit="submit"></form-submit>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </am-panel>\r\n        </template><!--/ mainview-body -->\r\n    </mainview><!--/ mainview -->\r\n</div>\r\n',data:function(){return{username:null,roles:{}}},computed:{assignedRoleIds:function(){var e=[];for(var r in this.roles)this.roles[r].assigned&&e.push(r);return e}},route:{data:function(){var e=this;this.username=this.$route.params.username,$.when(i.security.role.fetch(),i.user.fetchRoles(this.username)).then(function(r,n){var i,s=r[0].data,a={},t=n[0].data;for(var m in s)i=s[m],i.assigned=!1,a[i.id]=i;for(var m in t)a[t[m].id].assigned=!0;e.roles=a})}},methods:{toggle:function(e){this.roles[e].assigned=!this.roles[e].assigned},submit:function(){var e=this;i.user.assignRoles(this.username,this.assignedRoleIds.toString()).then(function(){s.alert("保存成功","success",function(){e.$route.router.go("/security/user")})})}}}});