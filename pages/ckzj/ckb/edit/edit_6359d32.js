define("pages/ckzj/ckb/edit/edit",function(n,i,r){"use strict";var a=n("msg"),e=n("pages/ckzj/ckb/api");r.exports={template:'\r\n<div>\r\n    <!-- mainview -->\r\n    <mainview :title="pageTitle">\r\n        <breadcrumb slot="breadcrumb">\r\n            <breadcrumb-item link="/" class="am-icon-home">首页</breadcrumb-item>\r\n            <breadcrumb-item>创客之家</breadcrumb-item>\r\n            <breadcrumb-item link="/ckzj/ckb">创客邦</breadcrumb-item>\r\n            <breadcrumb-item>{{pageTitle}}</breadcrumb-item>\r\n        </breadcrumb>\r\n\r\n        <!-- mainview-body -->\r\n        <template>\r\n            <!-- am-panel -->\r\n            <am-panel title="基本信息">\r\n                <!-- form wrapper -->\r\n                <div class="am-g">\r\n                    <div class="am-u-md-9 am-u-md-centered">\r\n                        <!-- form -->\r\n                        <form class="am-form am-form-horizontal">\r\n\r\n                            <div class="am-form-group">\r\n                                <div class="am-u-md-2">\r\n                                    <label class="am-form-label">标题</label>    \r\n                                </div>\r\n                                <div class="am-u-md-10">\r\n                                    <input v-model="model.title" type="text" placeholder="输入标题">\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="am-form-group">\r\n                                <div class="am-u-md-2">\r\n                                    <label class="am-form-label">简介</label>\r\n                                </div>\r\n                                <div class="am-u-md-10">\r\n                                    <textarea v-model="model.introduction" rows="3" placeholder="输入简介"></textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="am-form-group">\r\n                                <div class="am-u-md-2">\r\n                                    <label class="am-form-label">详情介绍</label>\r\n                                </div>\r\n                                <div class="am-u-md-10">\r\n                                    <textarea v-model="model.detail" rows="4" placeholder="输入详情介绍"></textarea>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="am-form-group">\r\n                                <div class="am-u-md-2">\r\n                                    <label class="am-form-label">所属行业</label>\r\n                                </div>\r\n                                <div class="am-u-md-10">\r\n                                    <select v-model="model.industry">\r\n                                        <option value="{{$key}}" v-for="item in $root.dict.industry">{{item}}</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="am-form-group">\r\n                                <div class="am-u-md-2">\r\n                                    <label class="am-form-label">区域</label>\r\n                                </div>\r\n                                <div class="am-u-md-10">\r\n                                    <ssq :district-code.sync="model.district"></ssq>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="am-form-group">\r\n                                <div class="am-u-md-2">\r\n                                    <label class="am-form-label">所在地址</label>\r\n                                </div>\r\n                                <div class="am-u-md-10">\r\n                                    <input v-model="model.location" type="text" placeholder="输入所在地址">\r\n                                </div>\r\n                            </div>\r\n\r\n                        </form>\r\n                        <!--/ form -->\r\n                    </div>\r\n                </div>\r\n                <!--/ form wrapper -->\r\n            </am-panel>\r\n            <!--/ am-panel -->\r\n\r\n            <div style="display:none;"><veditor name="content" @veditor-ready="veditorReady = true" @images-selected="onImagesSelected"></veditor></div>\r\n            <!-- am-panel -->\r\n            <am-panel title="简介图片">\r\n                <button class="am-btn am-btn-default am-btn-sm" @click="openUploadDialog(\'introductimg\')" :disabled="!veditorReady">上传图片</button>\r\n                <div class="am-g">\r\n                    <div class="am-u-md-1 am-margin-top" \r\n                        :class="{\'am-u-end\': $index == model.introductimg.length - 1}" \r\n                        v-for="imgSrc in model.introductimg" track-by="$index">\r\n\r\n                        <div class="square-container">\r\n                            <div class="square-container_inner">\r\n                                <a href="#" @click.prevent="removeImage(\'introductimg\', $index)" style="position:absolute;right:4px;">\r\n                                    <i class="am-icon-trash am-text-warning"></i>\r\n                                </a>\r\n                                <img :src="imgSrc" class="square-container_img">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </am-panel>\r\n            <!--/ am-panel -->\r\n\r\n            <!-- am-panel -->\r\n            <am-panel title="幻灯片图片">\r\n                <button class="am-btn am-btn-default am-btn-sm" @click="openUploadDialog(\'slideimg\')" :disabled="!veditorReady">上传图片</button>\r\n                <div class="am-g">\r\n                    <div class="am-u-md-1 am-margin-top" \r\n                        :class="{\'am-u-end\': $index == model.slideimg.length - 1}" \r\n                        v-for="imgSrc in model.slideimg" track-by="$index">\r\n\r\n                        <div class="square-container">\r\n                            <div class="square-container_inner">\r\n                                <a href="#" @click.prevent="removeImage(\'slideimg\', $index)" style="position:absolute;right:4px;">\r\n                                    <i class="am-icon-trash am-text-warning"></i>\r\n                                </a>\r\n                                <img :src="imgSrc" class="square-container_img">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </am-panel>\r\n            <!--/ am-panel -->\r\n\r\n            <!-- am-panel -->\r\n            <am-panel title="产品图片">\r\n                <button class="am-btn am-btn-default am-btn-sm" @click="openUploadDialog(\'productionimg\')" :disabled="!veditorReady">上传图片</button>\r\n                <div class="am-g">\r\n                    <div class="am-u-md-1 am-margin-top" \r\n                        :class="{\'am-u-end\': $index == model.productionimg.length - 1}" \r\n                        v-for="imgSrc in model.productionimg" track-by="$index">\r\n\r\n                        <div class="square-container">\r\n                            <div class="square-container_inner">\r\n                                <a href="#" @click.prevent="removeImage(\'productionimg\', $index)" style="position:absolute;right:4px;">\r\n                                    <i class="am-icon-trash am-text-warning"></i>\r\n                                </a>\r\n                                <img :src="imgSrc" class="square-container_img">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </am-panel>\r\n            <!--/ am-panel -->\r\n\r\n            <!-- am-panel -->\r\n            <am-panel title="会议室图片">\r\n                <button class="am-btn am-btn-default am-btn-sm" @click="openUploadDialog(\'boardroom\')" :disabled="!veditorReady">上传图片</button>\r\n                <div class="am-g">\r\n                    <div class="am-u-md-1 am-margin-top" \r\n                        :class="{\'am-u-end\': $index == model.boardroom.length - 1}" \r\n                        v-for="imgSrc in model.boardroom" track-by="$index">\r\n\r\n                        <div class="square-container">\r\n                            <div class="square-container_inner">\r\n                                <a href="#" @click.prevent="removeImage(\'boardroom\', $index)" style="position:absolute;right:4px;">\r\n                                    <i class="am-icon-trash am-text-warning"></i>\r\n                                </a>\r\n                                <img :src="imgSrc" class="square-container_img">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </am-panel>\r\n            <!--/ am-panel -->\r\n\r\n            <!-- am-panel -->\r\n            <am-panel title="休息区图片">\r\n                <button class="am-btn am-btn-default am-btn-sm" @click="openUploadDialog(\'restingarea\')" :disabled="!veditorReady">上传图片</button>\r\n                <div class="am-g">\r\n                    <div class="am-u-md-1 am-margin-top" \r\n                        :class="{\'am-u-end\': $index == model.restingarea.length - 1}" \r\n                        v-for="imgSrc in model.restingarea" track-by="$index">\r\n\r\n                        <div class="square-container">\r\n                            <div class="square-container_inner">\r\n                                <a href="#" @click.prevent="removeImage(\'restingarea\', $index)" style="position:absolute;right:4px;">\r\n                                    <i class="am-icon-trash am-text-warning"></i>\r\n                                </a>\r\n                                <img :src="imgSrc" class="square-container_img">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </am-panel>\r\n            <!--/ am-panel -->\r\n\r\n            <!-- am-panel -->\r\n            <am-panel title="免费咖啡图片">\r\n                <button class="am-btn am-btn-default am-btn-sm" @click="openUploadDialog(\'freecoffee\')" :disabled="!veditorReady">上传图片</button>\r\n                <div class="am-g">\r\n                    <div class="am-u-md-1 am-margin-top" \r\n                        :class="{\'am-u-end\': $index == model.freecoffee.length - 1}" \r\n                        v-for="imgSrc in model.freecoffee" track-by="$index">\r\n\r\n                        <div class="square-container">\r\n                            <div class="square-container_inner">\r\n                                <a href="#" @click.prevent="removeImage(\'freecoffee\', $index)" style="position:absolute;right:4px;">\r\n                                    <i class="am-icon-trash am-text-warning"></i>\r\n                                </a>\r\n                                <img :src="imgSrc" class="square-container_img">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </am-panel>\r\n            <!--/ am-panel -->\r\n\r\n            <!-- am-panel -->\r\n            <am-panel title="打印区图片">\r\n                <button class="am-btn am-btn-default am-btn-sm" @click="openUploadDialog(\'printing\')" :disabled="!veditorReady">上传图片</button>\r\n                <div class="am-g">\r\n                    <div class="am-u-md-1 am-margin-top" \r\n                        :class="{\'am-u-end\': $index == model.printing.length - 1}" \r\n                        v-for="imgSrc in model.printing" track-by="$index">\r\n\r\n                        <div class="square-container">\r\n                            <div class="square-container_inner">\r\n                                <a href="#" @click.prevent="removeImage(\'printing\', $index)" style="position:absolute;right:4px;">\r\n                                    <i class="am-icon-trash am-text-warning"></i>\r\n                                </a>\r\n                                <img :src="imgSrc" class="square-container_img">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </am-panel>\r\n            <!--/ am-panel -->\r\n\r\n            <!-- am-panel -->\r\n            <am-panel title="免费Wifi图片">\r\n                <button class="am-btn am-btn-default am-btn-sm" @click="openUploadDialog(\'wifi\')" :disabled="!veditorReady">上传图片</button>\r\n                <div class="am-g">\r\n                    <div class="am-u-md-1 am-margin-top" \r\n                        :class="{\'am-u-end\': $index == model.wifi.length - 1}" \r\n                        v-for="imgSrc in model.wifi" track-by="$index">\r\n\r\n                        <div class="square-container">\r\n                            <div class="square-container_inner">\r\n                                <a href="#" @click.prevent="removeImage(\'wifi\', $index)" style="position:absolute;right:4px;">\r\n                                    <i class="am-icon-trash am-text-warning"></i>\r\n                                </a>\r\n                                <img :src="imgSrc" class="square-container_img">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </am-panel>\r\n            <!--/ am-panel -->\r\n\r\n            <form-submit @submit="submit"></form-submit>\r\n        </template><!--/ mainview-body -->\r\n    </mainview><!--/ mainview -->\r\n</div>\r\n',mixins:[n("mixins/isNew")],data:function(){return{model:{id:null,title:null,introduction:null,detail:null,district:null,location:null,industry:1,introductimg:null,slideimg:null,productionimg:null,boardroom:null,restingarea:null,freecoffee:null,printing:null,wifi:null},veditorReady:!1,selecting:null}},computed:{pageTitle:function(){return this.isNew?"创建":"编辑"}},route:{data:function(n){if(this.isNew)n.next();else{var i=this.$route.params.id;e.get(i).then(function(i){i.data.introductimg=i.data.introductimg?i.data.introductimg.split(","):[],i.data.slideimg=i.data.slideimg?i.data.slideimg.split(","):[],i.data.productionimg=i.data.productionimg?i.data.productionimg.split(","):[],i.data.boardroom=i.data.boardroom?i.data.boardroom.split(","):[],i.data.restingarea=i.data.restingarea?i.data.restingarea.split(","):[],i.data.freecoffee=i.data.freecoffee?i.data.freecoffee.split(","):[],i.data.printing=i.data.printing?i.data.printing.split(","):[],i.data.wifi=i.data.wifi?i.data.wifi.split(","):[],n.next({model:i.data})})}}},methods:{_onSaveSuccess:function(){var n=this;a.alert("保存成功","success",function(){n.$route.router.go({name:"ckzj-ckb-list"})})},_join:function(n){return n?n.join(","):""},submit:function(){this.isNew?e.create({title:this.model.title,introduction:this.model.introduction,detail:this.model.detail,district:this.model.district,location:this.model.location,industry:this.model.industry,introductimg:this._join(this.model.introductimg),slideimg:this._join(this.model.slideimg),productionimg:this._join(this.model.productionimg),boardroom:this._join(this.model.boardroom),restingarea:this._join(this.model.restingarea),freecoffee:this._join(this.model.freecoffee),printing:this._join(this.model.printing),wifi:this._join(this.model.wifi)}).then(this._onSaveSuccess):e.update({id:this.model.id,title:this.model.title,introduction:this.model.introduction,detail:this.model.detail,district:this.model.district,location:this.model.location,industry:this.model.industry,introductimg:this._join(this.model.introductimg),slideimg:this._join(this.model.slideimg),productionimg:this._join(this.model.productionimg),boardroom:this._join(this.model.boardroom),restingarea:this._join(this.model.restingarea),freecoffee:this._join(this.model.freecoffee),printing:this._join(this.model.printing),wifi:this._join(this.model.wifi)}).then(this._onSaveSuccess)},openUploadDialog:function(n){this.selecting=n,this.$broadcast("openUploadDialog")},removeImage:function(n,i){this.model[n].splice(i,1)},onImagesSelected:function(n){var i=this.model[this.selecting]||[];i=i.concat($.map(n,function(n){return n.src})),this.$set("model."+this.selecting,i)}},components:{ssq:n("components/ssq/ssq")}}});