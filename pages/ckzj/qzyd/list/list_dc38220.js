define("pages/ckzj/qzyd/list/list",function(t,e,n){"use strict";var r=t("api"),i=t("msg");n.exports=Vue.extend({template:'\r\n<div>\r\n    <!-- mainview -->\r\n    <mainview title="圈子运动">\r\n        <breadcrumb slot="breadcrumb">\r\n            <breadcrumb-item link="/" class="am-icon-home">首页</breadcrumb-item>\r\n            <breadcrumb-item>创客之家</breadcrumb-item>\r\n            <breadcrumb-item>圈子运动</breadcrumb-item>\r\n        </breadcrumb>\r\n\r\n        <!-- mainview-body -->\r\n        <template>\r\n\r\n            <!-- data list -->\r\n            <table class="am-table am-table-hover am-table-well am-text-nowrap">\r\n                <thead>\r\n                    <tr>\r\n                        <th>ID</th>\r\n                        <th>标题</th>\r\n                        <th>评论数</th>\r\n                        <th>发布时间</th>\r\n                        <th width="100px" class="am-text-center">推荐 / 置顶</th>\r\n                        <th width="220px">操作</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for="item in items">\r\n                        <td>{{item.id}}</td>\r\n                        <td>{{item.title}}</td>\r\n                        <td>{{item.comment}}</td>\r\n                        <td>{{item.pubTime}}</td>\r\n                        <td class="am-text-center">\r\n                            <i class="am-text-lg am-icon-star" \r\n                                style="cursor:pointer;" \r\n                                :class="{\'am-text-warning\':item.isRecommended}"\r\n                                @click="recommend($index)"></i>\r\n                            \r\n                            <i class="am-text-lg am-icon-arrow-circle-up" \r\n                                style="cursor:pointer;" \r\n                                :class="{\'am-text-warning\':item.isTop}"\r\n                                @click="top($index)"></i>\r\n                        </td>\r\n                        <td>\r\n                            <!-- 行内按钮组 -->\r\n                            <div class="am-btn-group am-btn-group-xs">\r\n                                <a v-link="{name: \'ckzj-qzyd-detail\', params: {id: item.id}}" class="am-btn am-btn-default">\r\n                                    <span class="am-text-primary"><i class="am-icon-pencil-square-o"></i> 查看</span>\r\n                                </a>\r\n                                <a @click.prevent="remove(item.id)" class="am-btn am-btn-default">\r\n                                    <span class="am-text-danger"><i class="am-icon-trash-o"></i> 删除</span>\r\n                                </a>\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n\r\n            <pager :page="$route.query.page" :total="totalCount" :route="$route"></pager>\r\n            <!--/ data list -->\r\n            \r\n        </template><!--/ mainview-body -->\r\n    </mainview><!--/ mainview -->\r\n</div>\r\n',data:function(){return{items:[],totalCount:0}},route:{data:function(){this.fetch({page:this.$route.query.page})}},methods:{fetch:function(t){var e=this;r.ckzj.qzyd.fetch(t).then(function(t){e.items=t.data,e.totalCount=t.totalCount})},remove:function(t){var e=this;i.confirm("确定删除?",function(){r.ckzj.qzyd.remove(t).then(function(){i.alert("删除成功.","success"),e.fetch({page:e.$route.query.page})})})},recommend:function(t){var e,n=this,i=this.items[t],a=i.isRecommended;this.$set("items["+t+"].isRecommended",!a),e=a?r.ckzj.qzyd.unrecommend(i.id):r.ckzj.qzyd.recommend(i.id),e.fail(function(){n.$set("items["+t+"].isRecommended",a)})},top:function(t){var e,n=this,i=this.items[t],a=i.isTop;this.$set("items["+t+"].isTop",!a),e=a?r.ckzj.qzyd.untop(i.id):r.ckzj.qzyd.top(i.id),e.fail(function(){n.$set("items["+t+"].isTop",a)})}}})});