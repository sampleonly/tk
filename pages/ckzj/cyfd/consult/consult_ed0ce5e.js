define("pages/ckzj/cyfd/consult/consult",function(n,m,a){"use strict";var t=n("api"),e=n("msg");a.exports={template:'\r\n\r\n<div>\r\n    <!-- mainview -->\r\n    <mainview title="咨询问题">\r\n        <breadcrumb slot="breadcrumb">\r\n            <breadcrumb-item link="/" class="am-icon-home">首页</breadcrumb-item>\r\n            <breadcrumb-item>创客之家</breadcrumb-item>\r\n            <breadcrumb-item link="/ckzj/cyfd">创业辅导</breadcrumb-item>\r\n            <breadcrumb-item>咨询问题</breadcrumb-item>\r\n        </breadcrumb>\r\n\r\n        <!-- mainview-body -->\r\n        <template>\r\n            <!-- am-panel -->\r\n            <am-panel title="咨询问题信息">\r\n                <div class="am-g am-margin-top">\r\n                    <div class="am-u-md-2 am-text-right">\r\n                        <b>ID</b>\r\n                    </div>\r\n                    <div class="am-u-md-6 am-u-end">\r\n                        {{model.id}}\r\n                    </div>\r\n                </div>\r\n                <div class="am-g am-margin-top">\r\n                    <div class="am-u-md-2 am-text-right">\r\n                        <b>标题</b>\r\n                    </div>\r\n                    <div class="am-u-md-6 am-u-end">\r\n                        {{model.title}}\r\n                    </div>\r\n                </div>\r\n                <div class="am-g am-margin-top">\r\n                    <div class="am-u-md-2 am-text-right">\r\n                        <b>发布时间</b>\r\n                    </div>\r\n                    <div class="am-u-md-6 am-u-end">\r\n                        {{model.time}}\r\n                    </div>\r\n                </div>\r\n                <div class="am-g am-margin-top">\r\n                    <div class="am-u-md-2 am-text-right">\r\n                        <b>浏览量</b>\r\n                    </div>\r\n                    <div class="am-u-md-6 am-u-end">\r\n                        {{model.count}}\r\n                    </div>\r\n                </div>\r\n                <div class="am-g am-margin-top">\r\n                    <div class="am-u-md-2 am-text-right">\r\n                        <b>标题</b>\r\n                    </div>\r\n                    <div class="am-u-md-6 am-u-end">\r\n                        {{model.title}}\r\n                    </div>\r\n                </div>\r\n                <div class="am-g am-margin-top">\r\n                    <div class="am-u-md-2 am-text-right">\r\n                        <b>内容</b>\r\n                    </div>\r\n                    <div class="am-u-md-6 am-u-end">\r\n                        {{model.content}}\r\n                    </div>\r\n                </div>\r\n            </am-panel>\r\n            <!--/ am-panel -->\r\n\r\n            <!-- am-panel -->\r\n            <am-panel title="回复">\r\n                <div class="am-g am-margin-top">\r\n                    <div class="am-u-md-offset-2 am-u-md-8 am-u-end">\r\n                        <textarea v-model="content" rows="3" class="am-form-field" placeholder="输入要回复的内容..."></textarea>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="am-g am-margin-top">\r\n                    <div class="am-u-md-offset-2 am-u-md-8 am-u-end">\r\n                        <button @click.prevent="reply" class="am-btn am-btn-default am-btn-sm"><i class="am-icon-reply"></i> 回复</button>\r\n                    </div>\r\n                </div>\r\n            </am-panel>\r\n            <!--/ am-panel -->\r\n\r\n            <!-- am-panel -->\r\n            <am-panel title="评论列表">\r\n                <ul class="am-list am-list-static">\r\n                    <li v-for="comment in comments" track-by="id">\r\n                        <span class="am-badge am-badge-danger cursor-pointer" @click="removeComment(comment.id)">\r\n                            <i class="am-icon-remove am-icon-fw"></i>\r\n                        </span>\r\n                        \r\n                        <div class="am-text-truncate">{{comment.content}}</div>\r\n                        \r\n                        <small>{{comment.user}} 发表于 {{comment.time}}</small>\r\n                    </li>\r\n                </ul>\r\n                <pager :total="commentsTotal" :page.sync="commentsPage" @paginate.pager="onPaginate"></pager>\r\n            </am-panel>\r\n            <!--/ am-panel -->\r\n        </template><!--/ mainview-body -->\r\n    </mainview><!--/ mainview -->\r\n</div>\r\n',data:function(){return{model:{id:null,title:null,content:null,count:null,time:null},content:null,comments:[],commentsPage:1,commentsTotal:0}},route:{data:function(){var n=this,m=this.$route.params.id;t.ckzj.mentor.getConsult(m).then(function(m){n.model=m.data}),this.fetchComments(m,{page:n.commentsPage})}},methods:{back:function(){history.back()},fetchComments:function(n,m){var a=this;t.ckzj.mentor.fetchConsultComments(n,m).then(function(n){a.comments=n.data,a.commentsTotal=n.totalCount})},reply:function(){t.ckzj.mentor.replyConsult(this.model.id,this.content).then(function(){e.alert("回复成功.","success")})},onPaginate:function(){this.fetchComments(this.model.id,{page:self.commentsPage})},removeComment:function(n){var m=this;e.confirm("确定删除?",function(){t.ckzj.mentor.removeConsultComment(n).then(function(){e.alert("删除成功.","success"),m.fetchComments(m.model.id,{page:m.commentsPage})})})}}}});