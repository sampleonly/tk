define("service/auth",function(e,n,r){"use strict";function u(e,n){n=n||"id";for(var r,u={},t=0;t<e.length;t++)r=e[t],u[r[n]]=r;return u}var t=e("api"),s={__roleMap:null,user:{username:null,roleId:null,roles:null,permissions:null},_cache:function(){},_clearCache:function(){},login:function(e,n){var r=this;return t.auth.login(e,n).then(function(n){var t=n.data;return r.user.username=e,r.user.roles=t,r.__roleMap=u(t),1==t.length&&(r.roleId=t[0].id),r._cache(),t})},asRole:function(e){var n=this;return t.auth.loginAsRole(e).then(function(){n.user.roleId=e,n._cache()})},isAuthenticated:function(){return this.user&&this.user.username},getUser:function(){return this.user},logout:function(){var e=this;return t.auth.logout().then(function(){e.user.username=null,e.user.roleId=null,e.user.roles=null,e.user.permissions=null})}};r.exports=s});