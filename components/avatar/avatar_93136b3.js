define("components/avatar/avatar",function(e,r,a){"use strict";function n(e,r){if(window.FileReader){var a=new FileReader;a.onload=function(){r(a.result)},a.readAsDataURL(e)}}a.exports={template:'\r\n<div class="avatar">\r\n\r\n    <img :src="img" class="avatar_img" v-if="img">\r\n    <img src="/static/images/components/avatar/imgs/default-avatar.png" class="avatar_img" v-else>\r\n    \r\n        <!-- <vue-cropper img="mock/imgs/1.jpg" class="avatar_cropper" v-ref:cropper></vue-cropper>     -->\r\n\r\n    <label class="avatar_fileinput">\r\n        <input type="file" name="avatar" v-el:file-input>\r\n    </label>\r\n\r\n    <am-modal :show.sync="showModal">\r\n        <span slot="header">编辑头像</span>\r\n        \r\n        <am-panel>\r\n            <vue-cropper class="avatar_cropper" v-ref:cropper></vue-cropper>\r\n            <div slot="footer" class="am-text-right">\r\n                <a href="#" @click.prevent="cancel">取消</a> &nbsp;&nbsp;\r\n                <button class="am-btn am-btn-default" @click.prevent="save">确定</button>\r\n            </div>\r\n        </am-panel>\r\n    </am-modal>\r\n</div>\r\n',data:function(){return{showModal:!1}},props:{img:{twoWay:!0}},methods:{getCropper:function(){return this.$refs.cropper},closeModal:function(){this.$els.fileInput.value="",this.getCropper().reset(),this.showModal=!1},cancel:function(){this.closeModal()},save:function(){var e=this.getCropper();this.img=e.getCroppedCanvas().toDataURL(),this.closeModal()}},components:{"vue-cropper":e("components/vue-cropper/vue-cropper")},ready:function(){var e=this;this.$els.fileInput.addEventListener("change",function(){n(this.files[0],function(r){e.showModal=!0,Vue.nextTick(function(){e.$refs.cropper.replace(r)})})})}}});